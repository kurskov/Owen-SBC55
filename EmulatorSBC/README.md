# Эмулятор узлов установки SBC-55

Эмулятор выполняет переключения и управляет задержками изменения состояния датчиков различных узлов установки.

## Оборудование и программное обеспечение

Программируемое реле ПР200-24.2.2.0 ([Инструкция](/EmulatorSBC/EqManuals/re_pr200_1-ru-38699-1.69.pdf))

Модуль расширения ПРМ-24.1 ([Инструкция](/EmulatorSBC/EqManuals/re_prm-h.1_1-ru-51644-1.13.pdf))

Среда программирования OwenLogic ([Инструкция](/EmulatorSBC/EqManuals/rp_owen_logic_2.4.pdf))

## Расключение

### Входы

| Номер | Назначение                                    |
|------:|:----------------------------------------------|
|     1 | Включение мотора на подъем разбрызгивателя    |
|     2 | Включение мотора на опускание разбрызгивателя |
|     3 | Открытие сливного клапана первого танка       |
|     4 | Открытие сливного клапана второго танка       |
|     5 | Включение реле блокировки двери               |

### Выходы

| Номер | Назначение                          |
|------:|:------------------------------------|
|     1 | Разбрызгиватель в верхнем положении |
|     2 | Разбрызгиватель в нижнем положении  |
|     3 | Сливной клапан первого танка открыт |
|     4 | Сливной клапан второго танка открыт |
|     5 | Двери заблокированы                 |

## Исполняемая программа

### Список переменных

| Имя                | Тип  | ЭН* | По умолчанию | Комментарий                                   |
|--------------------|------|:---:|:------------:|-----------------------------------------------|
|                    |      |     |              | **Общие**                                     |
| runMode            | bool |     |              | Индикатор рабочего режима эмулятора           |
| mode               | int  | да  |      0       | Режим работы эмулятора                        |
| loadTime           | int  | да  |     2000     | Время отображения загрузочного экрана, мс     |
|                    |      |     |              | **Эмитация движения разбрызгивателя**         |
| motorUp            | bool |     |              | Включение мотора на подъем разбрызгивателя    |
| sensorUpPosition   | bool |     |              | Разбрызгиватель в верхнем положении           |
| motorDown          | bool |     |              | Включение мотора на опускание разбрызгивателя |
| sensorDownPosition | bool |     |              | Разбрызгиватель в нижнем положении            |
| delayUpDown        | int  | да  |     3000     | Время перемещения разбрызгивателя, мс         |
|                    |      |     |              | **Эмитация открывания сливов в танки**        |
| valveTank1         | bool |     |              | Открытие сливного клапана первого танка       |
| sensorValveTank1   | bool |     |              | Сливной клапан первого танка открыт           |
| valveTank2         | bool |     |              | Открытие сливного клапана второго танка       |
| sensorValveTank2   | bool |     |              | Сливной клапан второго танка открыт           |
| delayValveTank     | int  | да  |     700      | Время на открытие/закрытие клапана, мс        |
|                    |      |     |              | **Эмитация блокировки двери**                 |
| safetyDoorLockIn   | bool |     |              | Включение реле блокировки двери               |
| safetyDoorLockOut  | bool |     |              | Двери заблокированы                           |

*ЭН - энергонезависимая память*

## Результаты и планы

### Реализовано
- выбор режима эмуляции (нормальная работа/авария)
- индикация состояния вводов/выводов на экране
- эмитация движения разбрызгивателя
- эмитация открывания сливов в танки
- эмитация блокировки двери
- индикация соответствия температуры отмывочной жидкости
- состояние кнопки аварийной остановки

Полную историю изменений ПО можно посмотреть в файле [История изменений](/EmulatorSBC/change_history.md).
